{"version":3,"sources":["webpack:///./src/views/User.vue?811b","webpack:///./src/components/UserProfileCard.vue?2c76","webpack:///src/components/UserProfileCard.vue","webpack:///./src/components/UserProfileCard.vue?f858","webpack:///./src/components/UserProfileCard.vue","webpack:///./src/components/UserFollowingsCard.vue?0f5c","webpack:///src/components/UserFollowingsCard.vue","webpack:///./src/components/UserFollowingsCard.vue?b773","webpack:///./src/components/UserFollowingsCard.vue","webpack:///./src/components/UserFollowersCard.vue?91d6","webpack:///src/components/UserFollowersCard.vue","webpack:///./src/components/UserFollowersCard.vue?8515","webpack:///./src/components/UserFollowersCard.vue","webpack:///./src/components/UserCommentsCard.vue?78d1","webpack:///src/components/UserCommentsCard.vue","webpack:///./src/components/UserCommentsCard.vue?17a1","webpack:///./src/components/UserCommentsCard.vue","webpack:///./src/components/UserFavoritedRestaurantCard.vue?addd","webpack:///src/components/UserFavoritedRestaurantCard.vue","webpack:///./src/components/UserFavoritedRestaurantCard.vue?8f0b","webpack:///./src/components/UserFavoritedRestaurantCard.vue","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?6a5a","webpack:///./src/views/User.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","profile","isFollowed","commentAdjust","on","afterAddFollowing","afterCancelFollowing","followings","followers","favoritedRestaurants","staticRenderFns","_f","image","_v","_s","name","email","comments","length","favoritedRestaurantLength","followingsLength","followersLength","id","currentUser","params","isProcessing","$event","preventDefault","stopPropagation","cancelFollowing","addFollowing","props","type","Object","required","initialIsFollowed","Boolean","Array","data","watch","newValue","computed","methods","mixins","component","_l","following","key","follower","comment","RestaurantId","Restaurant","_e","restaurant","ruquired","components","UserProfileCard","UserFollowingsCard","UserFollowersCard","UserCommentsCard","UserFavoritedRestaurantCard","Spinner","isLoading","created","fetchUser","userId","beforeRouteUpdate","next","filter","push"],"mappings":"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","file":"js/chunk-2d0ab43a.f30d04ea.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"album py-5 bg-light\"},[(_vm.isLoading)?_c('Spinner'):_c('div',{staticClass:\"container\"},[_c('UserProfileCard',{attrs:{\"profile\":_vm.profile,\"initial-is-followed\":_vm.isFollowed,\"comments\":_vm.commentAdjust},on:{\"after-add-following\":_vm.afterAddFollowing,\"after-cancel-following\":_vm.afterCancelFollowing}}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4\"},[_c('UserFollowingsCard',{attrs:{\"followings\":_vm.followings}}),_c('br'),_c('UserFollowersCard',{attrs:{\"followers\":_vm.followers}})],1),_c('div',{staticClass:\"col-md-8\"},[_c('UserCommentsCard',{attrs:{\"comments\":_vm.commentAdjust}}),_c('br'),_c('UserFavoritedRestaurantCard',{attrs:{\"favoritedRestaurants\":_vm.favoritedRestaurants}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"row no-gutters\"},[_c('div',{staticClass:\"col-md-4\"},[_c('img',{attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.profile.image),\"width\":\"300px\",\"height\":\"300px\"}})]),_c('div',{staticClass:\"col-md-8\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(_vm._s(_vm.profile.name))]),_c('p',{staticClass:\"card-text\"},[_vm._v(\" \"+_vm._s(_vm.profile.email)+\" \")]),_c('ul',{staticClass:\"list-unstyled list-inline\"},[_c('li',[_c('strong',[_vm._v(_vm._s(_vm.comments.length))]),_vm._v(\" 已評論餐廳\")]),_c('li',[_c('strong',[_vm._v(_vm._s(_vm.profile.favoritedRestaurantLength))]),_vm._v(\" 收藏的餐廳\")]),_c('li',[_c('strong',[_vm._v(_vm._s(_vm.profile.followingsLength))]),_vm._v(\" followings (追蹤者)\")]),_c('li',[_c('strong',[_vm._v(_vm._s(_vm.profile.followersLength))]),_vm._v(\" followers (追隨者)\")])]),(_vm.profile.id === _vm.currentUser.id)?[_c('router-link',{attrs:{\"to\":{ name: 'user-edit', params: { id: _vm.profile.id }}}},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\" edit \")])])]:[(_vm.isFollowed)?_c('button',{staticClass:\"btn btn-danger\",attrs:{\"disabled\":_vm.isProcessing,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.cancelFollowing(_vm.profile)}}},[_vm._v(\"取消追蹤\")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":_vm.isProcessing,\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addFollowing(_vm.profile)}}},[_vm._v(\"追蹤\")])]],2)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card mb-3\">\n        <div class=\"row no-gutters\">\n          <div class=\"col-md-4\">\n            <img \n              :src=\"profile.image | emptyImage\"\n              width=\"300px\" \n              height=\"300px\"\n            >\n          </div>\n          <div class=\"col-md-8\">\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{{profile.name}}</h5>\n              <p class=\"card-text\">\n                {{profile.email}}\n              </p>\n              <ul class=\"list-unstyled list-inline\">\n                <li><strong>{{comments.length}}</strong> 已評論餐廳</li>\n                <li><strong>{{profile.favoritedRestaurantLength}}</strong> 收藏的餐廳</li>\n                <li><strong>{{profile.followingsLength}}</strong> followings (追蹤者)</li>\n                <li><strong>{{profile.followersLength}}</strong> followers (追隨者)</li>\n              </ul>\n              <template \n                v-if=\"profile.id === currentUser.id\"\n              >\n                <router-link\n                  :to=\"{ name: 'user-edit', params: { id: profile.id }}\">\n                  <button type=\"submit\" class=\"btn btn-primary\">\n                    edit\n                  </button>\n                </router-link>\n              </template>\n              <template v-else>\n                <button \n                  v-if=\"isFollowed\"\n                  :disabled=\"isProcessing\"\n                  type=\"button\"\n                  class=\"btn btn-danger\"\n                  @click.prevent.stop=\"cancelFollowing(profile)\"\n                >取消追蹤</button>\n                <button\n                  v-else\n                  :disabled=\"isProcessing\"\n                  type=\"button\"\n                  class=\"btn btn-primary\"\n                  @click.prevent.stop=\"addFollowing(profile)\"\n                >追蹤</button>\n              </template>\n            </div>\n          </div>\n        </div>\n      </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from '../utils/mixins'\nimport { mapState } from 'vuex'\nimport usersAPI from './../apis/users'\nimport { Toast } from './../utils/helpers'\n\nexport default {\n  name: 'UserProfileCard',\n  props: {\n    profile: {\n      type: Object,\n      required: true,\n    },\n    initialIsFollowed: {\n      type: Boolean,\n      required: true\n    },\n    comments: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      isFollowed: this.initialIsFollowed,\n      isProcessing: false\n    }\n  },\n  watch: {\n    initialIsFollowed(newValue) {\n      this.isFollowed = newValue\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  methods: {\n    async addFollowing(user) {\n      try {\n        this.isProcessing = true\n        const { data } = await usersAPI.addFollowing({ userId: user.id })\n        if(data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.$emit('after-add-following', this.currentUser)\n        this.isProcessing = false\n      } catch(error) {\n        this.isProcessing = false\n        Toast.fire({\n          icon: 'error',\n          title: '無法追蹤用戶，請稍後再試。'\n        })\n      }\n      \n    },\n    async cancelFollowing(user) {\n      try {\n        this.isProcessing = true\n        const { data } = await usersAPI.deleteFollowing({ userId: user.id})\n        if(data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.$emit('after-cancel-following', this.currentUser)\n        this.isProcessing = false\n      } catch(error) {\n        this.isProcessing = false\n        Toast.fire({\n          icon: 'error',\n          title: '無法取消追蹤該用戶，請稍後再試。'\n        })\n      }\n    }\n  },\n  mixins: [emptyImageFilter]\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfileCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserProfileCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserProfileCard.vue?vue&type=template&id=2159d46e&\"\nimport script from \"./UserProfileCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserProfileCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('strong',[_vm._v(_vm._s(_vm.followings.length))]),_vm._v(\" followings (追蹤者) \")]),_c('div',{staticClass:\"card-body\"},_vm._l((_vm.followings),function(following){return _c('router-link',{key:following.id,attrs:{\"to\":{ name: 'user', params: { id: following.id }}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(following.image),\"width\":\"60\",\"height\":\"60\"}})])}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\">\n     <div class=\"card-header\">\n       <strong>{{followings.length}}</strong> followings (追蹤者)\n     </div>\n     <div class=\"card-body\">\n       <router-link\n         v-for=\"following in followings\"\n         :key=\"following.id\" \n         :to=\"{ name: 'user', params: { id: following.id }}\"\n       >\n         <img \n            :src=\"following.image | emptyImage\"\n            width=\"60\" \n            height=\"60\" \n            class=\"avatar\"\n         >\n       </router-link>\n     </div>\n   </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from '../utils/mixins'\n\nexport default {\n  props: {\n    followings: {\n      type: Array,\n      required: true\n    }\n  },\n  mixins: [emptyImageFilter]\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowingsCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowingsCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollowingsCard.vue?vue&type=template&id=bb0180de&\"\nimport script from \"./UserFollowingsCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollowingsCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('strong',[_vm._v(_vm._s(_vm.followers.length))]),_vm._v(\" followers (追隨者) \")]),_c('div',{staticClass:\"card-body\"},_vm._l((_vm.followers),function(follower){return _c('router-link',{key:follower.id,attrs:{\"to\":{ name: 'user', params: { id: follower.id }}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(follower.image),\"width\":\"60\",\"height\":\"60\"}})])}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\">\n    <div class=\"card-header\">\n      <strong>{{followers.length}}</strong> followers (追隨者)\n    </div>\n    <div class=\"card-body\">\n        <router-link\n          v-for=\"follower in followers\"\n          :key=\"follower.id\" \n          :to=\"{ name: 'user', params: { id: follower.id }}\"\n        >\n            <img \n              :src=\"follower.image | emptyImage\" \n              width=\"60\" \n              height=\"60\" \n              class=\"avatar\">\n        </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from '../utils/mixins'\n\nexport default {\n  props: {\n    followers: {\n      type:Array,\n      required: true\n    }\n  },\n  mixins: [emptyImageFilter]\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowersCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowersCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollowersCard.vue?vue&type=template&id=1104009c&\"\nimport script from \"./UserFollowersCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollowersCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('strong',[_vm._v(_vm._s(_vm.comments.length))]),_vm._v(\" 已評論餐廳 \")]),_c('div',{staticClass:\"card-body\"},_vm._l((_vm.comments),function(comment){return _c('router-link',{key:comment.id,attrs:{\"to\":{ name: 'restaurant', params: { id: comment.RestaurantId || 0 }}}},[(comment.Restaurant)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(comment.Restaurant.image),\"width\":\"60\",\"height\":\"60\"}}):_vm._e()])}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\">\n    <div class=\"card-header\">\n      <strong>{{comments.length}}</strong> 已評論餐廳\n    </div>\n    <div class=\"card-body\">\n        <router-link \n          v-for=\"comment in comments\"\n          :key=\"comment.id\"\n          :to=\"{ name: 'restaurant', params: { id: comment.RestaurantId || 0 }}\"\n        >\n          <img \n            v-if=\"comment.Restaurant\"\n            :src=\"comment.Restaurant.image | emptyImage\" \n            width=\"60\" \n            height=\"60\" \n            class=\"avatar\">\n        </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from '../utils/mixins'\n\nexport default {\n  props: {\n    comments: {\n      type: Array,\n      required: true\n    }\n  },\n  mixins: [emptyImageFilter]\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserCommentsCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserCommentsCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserCommentsCard.vue?vue&type=template&id=3f8d87fa&\"\nimport script from \"./UserCommentsCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserCommentsCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('strong',[_vm._v(_vm._s(_vm.favoritedRestaurants.length))]),_vm._v(\" 收藏的餐廳 \")]),_c('div',{staticClass:\"card-body\"},_vm._l((_vm.favoritedRestaurants),function(restaurant){return _c('router-link',{key:restaurant.id,attrs:{\"to\":{ name: 'restaurant', params: { id: restaurant.id }}}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(restaurant.image),\"width\":\"60\",\"height\":\"60\"}})])}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"card\">\n    <div class=\"card-header\">\n      <strong>{{favoritedRestaurants.length}}</strong> 收藏的餐廳\n    </div>\n    <div class=\"card-body\">\n        <router-link \n          v-for=\"restaurant in favoritedRestaurants\"\n          :key=\"restaurant.id\"\n          :to=\"{ name: 'restaurant', params: { id: restaurant.id }}\"\n        >\n          <img \n            :src=\"restaurant.image | emptyImage\" \n            width=\"60\" \n            height=\"60\" \n            class=\"avatar\"\n          >\n        </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { emptyImageFilter } from '../utils/mixins'\n\nexport default {\n  props: {\n    favoritedRestaurants: {\n      type: Array,\n      ruquired: true\n    }\n  },\n  mixins: [emptyImageFilter]\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFavoritedRestaurantCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFavoritedRestaurantCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFavoritedRestaurantCard.vue?vue&type=template&id=63c9e2d5&\"\nimport script from \"./UserFavoritedRestaurantCard.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFavoritedRestaurantCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"album py-5 bg-light\">\n    <Spinner v-if=\"isLoading\" />\n    <div class=\"container\" v-else>\n      <UserProfileCard\n        :profile=\"profile\"\n        :initial-is-followed=\"isFollowed\"\n        :comments=\"commentAdjust\"\n        @after-add-following=\"afterAddFollowing\"\n        @after-cancel-following=\"afterCancelFollowing\"\n      />\n\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <!-- user following card -->\n          <UserFollowingsCard :followings=\"followings\" />\n          <br />\n          <!-- user followers card -->\n          <UserFollowersCard :followers=\"followers\" />\n        </div>\n\n        <div class=\"col-md-8\">\n          <!-- user comments card -->\n          <UserCommentsCard :comments=\"commentAdjust\" />\n          <br />\n          <!-- user favorited restaurant card -->\n          <UserFavoritedRestaurantCard\n            :favoritedRestaurants=\"favoritedRestaurants\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserProfileCard from \"../components/UserProfileCard.vue\";\nimport UserFollowingsCard from \"../components/UserFollowingsCard.vue\";\nimport UserFollowersCard from \"../components/UserFollowersCard.vue\";\nimport UserCommentsCard from \"../components/UserCommentsCard.vue\";\nimport UserFavoritedRestaurantCard from \"../components/UserFavoritedRestaurantCard.vue\";\nimport Spinner from './../components/Spinner.vue'\nimport usersAPI from \"./../apis/users\";\nimport { Toast } from \"./../utils/helpers\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"User\",\n  components: {\n    UserProfileCard,\n    UserFollowingsCard,\n    UserFollowersCard,\n    UserCommentsCard,\n    UserFavoritedRestaurantCard,\n    Spinner\n  },\n  data() {\n    return {\n      profile: {\n        id: 0,\n        name: \"\",\n        email: \"\",\n        image: \"\",\n        favoritedRestaurantLength: 0,\n        followingsLength: 0,\n        followersLength: 0,\n      },\n      followings: [],\n      followers: [],\n      comments: [],\n      favoritedRestaurants: [],\n      isFollowed: false,\n      isLoading: true\n    };\n  },\n  created() {\n    const { id: userId } = this.$route.params;\n    this.fetchUser(userId);\n  },\n  beforeRouteUpdate(to, from, next) {\n    const { id: userId } = to.params\n    this.fetchUser(userId)\n    next()\n  },\n  computed: {\n    ...mapState(['currentUser']),\n    // 排除餐廳已經不存在的餐廳評論。\n    commentAdjust() {\n      return this.comments.filter(comment => comment.Restaurant)\n    }\n  },\n  methods: {\n    async fetchUser(userId) {\n      try {\n          const { data, statusText } = await usersAPI.get({ userId });\n\n          if (statusText !== \"OK\") {\n            throw new Error();\n          }\n\n          const { profile, isFollowed } = data;\n          const {\n            id,\n            name,\n            email,\n            image,\n            Followings,\n            Followers,\n            Comments,\n            FavoritedRestaurants,\n          } = profile;\n          this.profile = {\n            ...this.profile,\n            id,\n            name,\n            email,\n            image,\n            favoritedRestaurantLength: FavoritedRestaurants.length,\n            followingsLength: Followings.length,\n            followersLength: Followers.length,\n          };\n          this.followings = Followings;\n          this.followers = Followers;\n          this.comments = Comments\n          this.favoritedRestaurants = FavoritedRestaurants;\n          this.isFollowed = isFollowed;\n\n          this.isLoading = false\n      } catch (error) {\n        this.isLoading = false\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得使用者資料，請稍後再試。\",\n        });\n      }\n    },\n    afterAddFollowing(currentUser) {\n      this.followers.push(currentUser);\n      this.isFollowed = true;\n      this.profile.followersLength += 1\n    },\n    afterCancelFollowing(currentUser) {\n      this.followers = this.followers.filter(\n        (follower) => follower.id !== currentUser.id\n      );\n      this.isFollowed = false;\n      this.profile.followersLength -= 1\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=1e1c3b02&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}